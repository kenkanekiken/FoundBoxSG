@using FoundBoxSG.Domain

@if (Item is null)
{
    <!-- Right side when nothing is selected -->
    <div class="col-md-9 d-none d-md-block px-5">
        <p class="text-muted pt-5">
            Select a listing on the left to view its details.
        </p>
    </div>
}
else
{
    <!-- Right side when an item is selected -->
    <div class="col-md-9 d-none d-md-block px-5">
        <h2>@Item.Title</h2>
        <div class="fw-bold">@Item.ItemCategory</div>
        <div>📍 @Item.Location</div>
        <small class="text-muted">
            Posted @Item.DateCreated
        </small>

        <div class="py-4">
            <button type="button" class="btn btn-dark">Claim item</button>
        </div>

        <!-- You can later bind this to Item.ImageUrl or a list of images -->
        <div id="carouselExampleDark" class="carousel carousel-dark slide">
            <div class="carousel-indicators">
                @if (Item.Images is not null && Item.Images.Any())
                {
                    @for (int i = 0; i < Item.Images.Count; i++)
                    {
                        <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="@i"
                                class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")" aria-label="Slide @(i + 1)"></button>
                    }
                }
            </div>

            <div class="carousel-inner">
                @if (Item.Images is not null && Item.Images.Any())
                {
                    @for (int i = 0; i < Item.Images.Count; i++)
                    {
                    <div class = "carousel-item @(i == 0 ? "active" : "")" data-bs-interval="3000">
                        <img src="@Item.Images[i]" class="d-block w-100" style="object-fit:contain; height: 400px;" alt="Item Image">
                    </div>    
                    }
                }
                else
                {
                    <div class="carousel-item active">
                        <img src="/images/placeholder-no-image.png" class="d-block w-100" alt="No Image Available">
                    </div>
                }

            </div>
            @if (Item.Images is not null && Item.Images.Count > 1)
            {
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            }
        </div>

        <div class="pt-4">Item description</div>
        <div class="border"></div>

        <div class="pt-3 fw-bold">ID: @Item.Id</div>

        <div class="pt-3 fw-bold">Brand: @Item.Brand</div>

        <div class="pt-3 fw-bold">Color: @Item.Color</div>

        <div class="pt-3 fw-bold">Unqiue Feature: @Item.UniqueFeatures</div>

        <div class="pt-3 fw-bold">Description:</div>
        <div class="pt-3 pb-5">
            @Item.Description
        </div>
    </div>
}

@code {
    [Parameter] public Listings? Item { get; set; }
}
